{% extends 'base.html' %}
{% block content %}

<!-- inicio modal -->
{%  include 'includes/modalTipoDato.html' %}
<!-- fin modal -->

<!-- INICIO MODAL DE VALOR DE REFERENCIA -->
{%  include 'includes/modalValRef.html' %}
<!-- FIN MODAL DE VALOR DE REFERENCIA -->
<div class="row">
    <div class="col-lg-8 col-lg-offset-2">

<h1> {{ title }} </h1>

<form method="POST" action="">{% csrf_token %}
	<div class="controls">
		<div class="row">
            <div class="col-md-6">
                <div class="form-group">
			    	<label for="descripcion">Descripcion:</label>
			    	<input type="text" class="form-control" id="descripcion" name="descripcion" value="{{ instance.descripcion }}">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
			    	<label for="tecnica">Tecnica:</label>
			    	<input type="text" class="form-control" id="tecnica" name="tecnica" value="{{ instance.tecnica }}">
			    </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <!-- SELECT que no funciona:  -->
                <div class="form-group">
			    	<label for="muestra">Muestra:</label>
			    	<input type="text" class="form-control" id="muestra" name="muestra" value="{{ instance.muestra }}">
                </div>
            </div>
            <div class="col-md-3">
            	<div class="form-check disabled">
			    	<label class="form-check-label" for="tercerizacion">
    				<input type="checkbox" class="form-check-input" id="tercerizacion" name="tercerizacion" value="{{ instance.tercerizacion }}" disabled> Tercerizacion</label>
                </div>
            </div>
        </div>

<!-- DIV PARAMETROS -->
	<div class="row">
		<div class="col-md-10 col-md-offset-1">
			<div class="parametros">


<div class="panel panel-default">
  <div class="panel-heading">

				<label for="grupo">Grupo de Parametros</label>
				<input type="text" class="form-control" id="grupo" name="grupo" value="{{ instance.grupo }}">

  </div>
  <div class="panel-body">
    
	<table class="table table-striped table-condensed" id="tabla">
		<thead>
			<tr class="active">
				<td><label for="descripcion">Descripcion</label></td>
				<td>
					<label for="tipo_de_dato">Tipo de Dato 
						<a href="#" data-toggle="modal" data-target="#myModal">
						<span class="glyphicon glyphicon-question-sign"></span>
						</a>
					</label>
				</td>
				<td><label>Valor Predeterminado / Referencia</label></td>
				<td><label for="unidadmedida">Unidad de Medida</label></td>
				<td></td>				
			</tr>
		</thead>

		<tbody>
			
			<tr id="parametro_js">
				<td><input type="text" class="form-control" id="descripcion" name="descripcion" value="{{ instance.descripcion }}"></td>
				<td>
					<!-- REVISAR -->
					<select class="selectpicker">
						<option>Numero Entero</option>
						<option>Numero con decimales</option>
						<option>Positivo/Negativo</option>
						<option>Texto</option>
					</select>
				</td>
				<td><a href="#" data-toggle="modal" data-target="#ModalValorRef" class="btn btn-default">Ingresar</a></td>

				<td><input type="text" class="form-control" id="unidadmedida" name="unidadmedida" value="{{ instance.unidadmedida }}"></td>
				<td class="eliminar">Eliminar</td>
			</tr>
		</tbody>
	</table>
	<input type="button" id="agregar" value="Agregar Parametro"/>

  </div> <!-- fin div panel-body -->
</div> <!-- fin div panel -->
	
		<div class="row">
			<div class="col-md-12">
                <a href="#">Agregar grupo de parametros <span class="glyphicon glyphicon-plus"></span></a>
            </div>
        </div>

			</div>
		</div>
	</div>
	
<!-- FIN DEL DIV DE PARAMETROS -->

        <div class="row">
            <div class="col-md-12">
                <div class="form-group">
			    	<label for="piepagina">Texto para incluir en pie de pagina:</label>
			    	<textarea class="form-control" id="piepagina" name="piepagina" value="{{ instance.piepagina }}"> </textarea>
			    </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-3">
                <div class="form-check disabled">
			    	<label class="form-check-label" for="activo">
    				<input type="checkbox" class="form-check-input" id="activo" name="activo" value="{{ instance.activo }}" disabled> Activo</label>
                </div>
            </div>
        </div>


        <div class="row">
			<div class="col-md-12">
                <input type="submit" class="btn btn-success btn-send" value="Enviar">
            </div>
        </div>
    </div>
</form>        
</div>
</div>
{% endblock %}

{% block javascript %}
<script type="text/javascript">
$(document).ready(function(){
	
	$(".parametros").on('click', "#agregar_parametros", function(){
		$(this).parent().parent().parent().append("<tr><td><input type='text' class='form-control' id='descripcion' name='descripcion' value='{{ instance.descripcion }}'></td><td><select class='selectpicker'><option value='I'>Numero Entero</option><option value='F'>Numero con decimales</option><option value='B'>Positivo/Negativo</option><option value='S'>Texto</option></select></td><td><a href='#' class='btn btn-default'>Ingresar</a></td><td><input type='text' class='form-control' id='unidadmedida' name='unidadmedida' value='{{ instance.unidadmedida }}'></td><td><div class='btn btn-danger'>Eliminar</div></td></tr>")
		});
	$(".parametros").on('click', ".btn-danger", function(){
		$(this).parent().parent().remove();
	});

	$("#agregar_block_parametros").click(function(){

		$(".parametros").append("<div class='panel panel-default'><div class='panel-heading'><label for='grupo'>Grupo de Parametros</label><input type='text' class='form-control' id='grupo' name='grupo' value='{{ instance.grupo }}'></div><div class='panel-body'><table class='table table-stripedtable condensed' id='tabla'><thead><tr class='active'><td><label for='descripcion'>Descripcion</label></td><td><label for='tipo_de_dato'>Tipo de Dato <a href='#' data-toggle='modal' data-target='#myModal'><span class='glyphicon glyphicon-question-sign'></span></a></label></td><td><label>Valor Predeterminado / Referencia</label></td><td><label for='unidadmedida'>Unidad de Medida</label></td><td><button id='agregar_parametros'>Agregar parametro <span class='glyphicon glyphicon-plus'></button></td></tr></thead><tbody id='parametro_js'><tr><td><input type='text' class='form-control' id='descripcion' name='descripcion' value='{{ instance.descripcion }}'></td><td><select class='selectpicker'><option value='I'>Numero Entero</option><option value='F'>Numero con decimales</option><option value='B'>Positivo/Negativo</option><option value='S'>Texto</option></select></td><td><a href='#' class='btn btn-default'>Ingresar</a></td><td><input type='text' class='form-control' id='unidadmedida' name='unidadmedida' value='{{ instance.unidadmedida }}'></td><td><div class='btn btn-danger'>Eliminar</div></td></tr></tbody></table>")
	});
	

});
</script> 

{% endblock %}