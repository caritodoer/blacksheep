{% extends 'base.html' %}
{% block content %}



		<h1> {{ title }} </h1>

<form class="form-horizontal" method="POST" action="">{% csrf_token %}
	<div class="form-group">
		<div class="row">
			<!-- Descripcion -->
			<label class="control-label col-sm-2" for="descripcion">Descripcion:</label>
			<div class="col-sm-4">
				<input type="text" class="form-control" id="descripcion" name="descripcion" value="{{ instance.descripcion }}">
			</div>
		</div>

		<br>
		<div class="row">
			<!-- Especie -->
			<label class="control-label col-sm-2" for="especie">especie:</label>
			<select name="especie" class="col-sm-2" id="sel_especie"></select>
			<!-- Esto deberia ser un <select> pero no funciona -->
			<div class="col-sm-4">
			</div>
		</div>
		<br>
		<div class="row">
			<div class="form-group">
			    <div class="col-sm-12">
					<button type="submit" class="btn btn-default">Enviar</button>
				</div>

			</div>
		</div>
	</div>
</form>
{% endblock %}

{% block javascript %} 
<script type="text/javascript">
$(document).ready(function() {
		var select = "{{ instance.especie.id }}"
		$.ajax({
            url:"/j_especie/",
            type:"GET",
            dataType: "json",
            success: function(especie){
            	console.log(select)
            	$.each(especie,function(index, obj) 
				{	if(obj.id == select){
					$('#sel_especie').append('<option selected value=' + obj.id + '>' + obj.descripcion + '</option>');
					}
					else{
					$('#sel_especie').append('<option value=' + obj.id + '>' + obj.descripcion + '</option>');	
					}
				});
            }
        });	

	});  
</script>
{% endblock %}