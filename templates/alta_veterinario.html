{% extends 'base.html' %}
{% block content %}

<div class="row">
    <div class="col-lg-8 col-lg-offset-2">

<h1> {{ title }} </h1>

<form method="POST" action="">{% csrf_token %}

<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingOne">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
            Veterinario
        </a>
      </h4>
    </div>
    <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
      <div class="panel-body">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="nombre">Nombre:</label>
                    <input type="text" class="form-control" id="nombre" name="nombre" value="{{ instance.nombre }}">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="apellido">Apellido:</label>
                    <input type="text" class="form-control" id="apellido" name="apellido" value="{{ instance.apellido }}">
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="matricula">Matricula:</label>
                    <input type="text" class="form-control" id="matricula" name="matricula" value="{{ instance.matricula }}">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="dni">DNI:</label>
                    <input type="text" class="form-control" id="dni" name="dni" value="{{ instance.dni }}">
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label class="form-check-label" for="especializacion">Especializacion:</label>
                    <div  form-check id="especializacion"></div>
                </div>
            </div>
        </div> 


      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingTwo">
      <h4 class="panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
          Datos de Contacto
        </a>
      </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
      <div class="panel-body">

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="dom_part">Domicilio Particular:</label>
                    <input type="text" class="form-control" id="dom_part" name="dom_part" value="{{ instance.domicilio_particular }}">
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <label for="cp_part">Codigo Postal:</label>
                    <input type="text" class="form-control" id="cp_part" name="cp_part" value="{{ instance.cp_domicilio_particular }}">
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="email">Email:</label>
                    <div class="input-group">
                        <span class="input-group-addon" id="basic-addon1">@</span>
                        <input type="text" id="email" name="email" class="form-control" value="{{ instance.email }}" aria-describedby="basic-addon1">
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2">
                <div class="form-group">
                    <label for="cod_ar">Codigo de Area:</label>
                    <input type="text" class="form-control" id="cod_ar" name="cod_ar" value="{{ instance.codigo_area }}">
                </div>
            </div>
            <div class="col-md-5">
                <div class="form-group">
                    <label for="tel1">Telefono 1:</label>
                    <input type="text" class="form-control" id="tel1" name="tel1" value="{{ instance.telefono1 }}">
                </div>
            </div>
            <div class="col-md-5">
                <div class="form-group">
                    <label for="tel2">Telefono 2:</label>
                    <input type="text" class="form-control" id="tel2" name="tel2" value="{{ instance.telefono2 }}">
                </div>
            </div>
        </div>

      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingThree">
      <h4 class="panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
          Datos Fiscales
        </a>
      </h4>
    </div>
    <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
      <div class="panel-body">

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="dom_fiscal">Domicilio Fiscal:</label>
                    <input type="text" class="form-control" id="dom_fiscal" name="dom_fiscal" value="{{ instance.domicilio_fiscal }}">
                </div>
            </div>
            <div class="col-md-2">
                <div class="form-group">
                    <label for="cp_fiscal">Codigo Postal:</label>
                    <input type="text" class="form-control" id="cp_fiscal" name="cp_fiscal" value="{{ instance.cp_domicilio_fiscal }}">
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="cuit">CUIT:</label>
                    <input type="text" class="form-control" id="cuit" name="cuit" value="{{ instance.cuit }}">
                </div>
            </div>
        </div>


      </div>
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingFour">
      <h4 class="panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
          Otros Datos
        </a>
      </h4>
    </div>
    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
      <div class="panel-body">

<div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="f_alta">Fecha de Alta:</label>
        <input type="date" class="form-control" id="f_alta" name="f_alta" value="{{ instance.fecha_ingreso }}" placeholder="AAAA-MM-DD">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="f_baja">Fecha de Baja:</label>
                    <input type="date" class="form-control" id="f_baja" name="f_baja" value="{{ instance.fecha_baja }}">
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label for="ac_br">Acreditacion Brucelosis:</label>
                    <input type="date" class="form-control" id="ac_br" name="ac_br" value="{{ instance.acreditacion_brucelosis }}" placeholder="MONMJHB0303456">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label for="ac_aie">Acreditacion AIE:</label>
                    <input type="date" class="form-control" id="ac_aie" name="ac_aie" value="{{ instance.acreditacion_aie }}" placeholder="0303456">
                </div>
            </div>
        </div>


     </div>
    </div>
  </div>
</div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-check disabled">
                    <label class="form-check-label" for="activo">
                    <input type="checkbox" class="form-check-input" id="activo" name="activo" value="{{ instance.activo }}" checked disabled> Activo</label>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <input type="submit" class="btn btn-success btn-send" value="Enviar">
            </div>
        </div>

</form>

    </div>
</div>
        
{% endblock %}

{% block javascript %} 
<script type="text/javascript">
$(document).ready(function() {
        var espelist = []
            "{% for x in instance.especializacion.all %}"
        espelist.push("{{x.id}}")
            "{% endfor %}"
            
        $.ajax({
            url:"/j_especializacion/",
            type:"GET",
            dataType: "json",
            success: function(especializacion){
                $.each(especializacion,function(index, obj) 
                {  

                    $('#especializacion').append('<br><input type="checkbox" name="especializacion" value="'+ obj.id+'"> '+obj.descripcion);
                });

                $("#especializacion > input").each(function(){
                    for (var i = espelist.length - 1; i >= 0; i--) {
                    
                    console.log($(this).attr("value"))
                    if($(this).attr("value") == espelist[i])
                    {
                         this.setAttribute("checked", "checked")
                    } //if
                    } //for

                }); // Explotacion Checked
            }
        }); 

    });  
</script>
{% endblock %}